import{u as $,r as O,o as r,c as u,b as t,a as y,w as U,t as v,d as x,e as f,f as V,g as F,s as g,h as p,i as T,v as C,j as S,k as E,l as M,n as I,_ as B,F as H,m as P,p as j}from"./file_index.d7603ded.js";const q={class:"main-container"},z={id:"main-menu",class:"main-menu container-header"},J=t("h2",null,"TO-DO TASK APP",-1),K={id:"welcomemsg",class:""},L=t("u",null,"Username:",-1),R=f("\xA0"),G={id:"today"},Q=f("Today is: "),W={__name:"Header",setup(l){const o=V(),e=$(),d=Date.now(),n=new Date(d),m=e.user.email,s=async()=>{try{await $().signOut(),o.push({path:"/auth/login"})}catch(a){errorMsg.value=a.message,setTimeout(()=>{errorMsg.value=null},5e3)}};return(a,i)=>{const k=O("router-link");return r(),u("div",q,[t("div",null,[t("div",z,[y(k,{to:"/"},{default:U(()=>[J]),_:1}),t("p",K,[L,t("b",null,[R,t("span",null,v(x(m)),1)])]),t("p",G,[Q,t("b",null,v(x(n).toDateString()),1)]),t("button",{onClick:s,type:"button",id:"btnsignout"},"Sign Out")])])])}}},_=F("task",{state:()=>({tasks:[]}),actions:{async getTasks(){const{data:l}=await g.from("task").select("*").order("id",{ascending:!1});return this.tasks=l,this.tasks},async addTask(l,o){console.log($().user.id),await g.from("task").insert([{user_id:$().user.id,title:l,is_completed:!1,description:o}])},async editTask(l,o,e){await g.from("task").update({title:l,description:o}).eq("id",e)},async deleteTask(l){await g.from("task").delete().match({id:l})},async completedTask(l,o){await g.from("task").update({is_completed:o}).match({id:l})}}});const X={class:"container-tasks"},Y={class:"task-form",id:"formInputs"},Z=t("div",{class:"title-add"},"Add a new task",-1),tt={class:"show-error"},et={key:0,class:"",role:"alert"},st=["onClick"],ot={__name:"NewTask",emits:["childEmitTask"],setup(l,{emit:o}){_();const e=p(""),d=p(""),n=p(!1),c=p(null),m=()=>{if(e.value.length===0||d.value.length===0)n.value=!0,c.value="Task needs a title and description to be saved",setTimeout(()=>{n.value=!1},5e3);else{const s={title:e.value,description:d.value};o("childEmitTask",s),e.value="",d.value="",id.value=""}};return(s,a)=>(r(),u("div",X,[t("div",Y,[Z,T(t("input",{type:"text",id:"form3Example1",class:"",placeholder:"New task title","onUpdate:modelValue":a[0]||(a[0]=i=>e.value=i)},null,512),[[C,e.value]]),t("div",null,[T(t("textarea",{type:"text",id:"form3Example2",class:"",placeholder:"Description","onUpdate:modelValue":a[1]||(a[1]=i=>d.value=i)},null,512),[[C,d.value]])]),t("div",tt,[n.value?(r(),u("p",et,v(c.value),1)):S("",!0),t("button",{onClick:E(m,["prevent"]),class:"btn-add-task"},"Add a task",8,st)])])]))}};const at={class:"date-item"},lt={class:"time"},it={class:"title"},nt={class:"description"},dt={class:"buttons-container"},ct=f(" Completed task "),rt={key:0},ut={key:1,class:""},_t=f(" Show edit "),pt=t("i",{class:""},null,-1),mt=[_t,pt],vt=f(" Delete task "),ht=t("i",{class:""},null,-1),kt=[vt,ht],gt={key:0,class:"edit-container"},yt=["onSubmit"],Tt=["placeholder"],ft=["placeholder"],bt={class:"edit-close-btns"},wt={key:0,class:"",role:"alert"},$t=["onClick"],xt={__name:"TaskItem",props:["item"],emits:["childEditStatus","childEmitTask","childToggleStatus","childDeleteStatus"],setup(l,{emit:o}){const e=l,d=()=>{m.value=!m.value},n=p(e.item.title),c=p(e.item.description),m=p(!1),s=p(!1),a=M(()=>new Date(e.item.created_at).toDateString()),i=()=>{if(n.value.length===0||c.value.length===0)k.value=!0,D.value="Task needs a title and description to be saved",setTimeout(()=>{k.value=!1},5e3);else{const b={title:n.value,description:c.value,id:e.item.id};o("childEditStatus",b),n.value="",c.value=""}},k=p(!1),D=p(null),A=b=>{s.value=!s.value,o("childToggleStatus",e.item.id)},N=()=>{o("childDeleteStatus",e.item.id)};return(b,h)=>(r(),u("div",{class:I(["item-container",{"completed-task-bg":l.item.is_completed}])},[t("div",at,[t("div",lt,v(x(a)),1)]),t("h3",it,v(l.item.title),1),t("p",nt,v(l.item.description),1),t("div",dt,[t("button",{type:"button",class:"completed-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Mark as complete",onClick:A},[ct,s.value?(r(),u("span",ut)):(r(),u("span",rt))]),t("button",{type:"button",class:"show-edit","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit",onClick:d},mt),t("button",{type:"button",class:"delete-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete",onClick:N},kt)]),m.value?(r(),u("div",gt,[t("form",{onSubmit:E(i,["prevent"]),class:"edit-task"},[T(t("input",{type:"text",id:"form3Example20",class:"",placeholder:e.item.title,"onUpdate:modelValue":h[0]||(h[0]=w=>n.value=w)},null,8,Tt),[[C,n.value]]),t("div",null,[T(t("textarea",{type:"text",id:"form3Example21",class:"",placeholder:e.item.description,"onUpdate:modelValue":h[1]||(h[1]=w=>c.value=w)},null,8,ft),[[C,c.value]])]),t("div",bt,[k.value?(r(),u("p",wt,v(D.value),1)):S("",!0),t("button",{onClick:E(i,["prevent"]),type:"submit",id:"btnEdit",class:"edit-btn"},"Edit task",8,$t),t("button",{onClick:h[2]||(h[2]=w=>m.value=!1),type:"",id:"closeEdit",class:"close-edit-btn"},"Close edit task")])],40,yt)])):S("",!0)],2))}};const Ct={},St=t("div",{class:"footer"},[t("div",{class:"show"},[t("p",null,[t("b",null,"Sophia de Jong")])]),t("div",null,[t("p",null,"2022")]),t("div",null,[t("p",null,[t("b",null,"Ironhack BCN")])])],-1),Et=[St];function Dt(l,o,e,d,n,c){return r(),u("footer",null,Et)}const Mt=B(Ct,[["render",Dt]]);const At={class:"all-items"},Nt={class:"show-filters"},Ot={class:"container-old-items"},Vt={__name:"Home",setup(l){const o=p("showAll");_().getTasks();const e=async s=>{await _().addTask(s.title,s.description),_().getTasks()},d=M(()=>_().tasks),n=async(s,a)=>{a=!a,await _().completedTask(s,a),_().getTasks()},c=async s=>{await _().editTask(s.title,s.description,s.id),console.log(s),_().getTasks()},m=async s=>{await _().deleteTask(s),_().getTasks()};return(s,a)=>(r(),u("body",null,[y(W),t("div",At,[t("div",Nt,[t("button",{onClick:a[0]||(a[0]=i=>o.value="showAll"),style:{"background-color":"blue",color:"white"}},"Show all"),t("button",{onClick:a[1]||(a[1]=i=>o.value="completedTasks"),style:{"background-color":"green",color:"white"}},"Completed"),t("button",{onClick:a[2]||(a[2]=i=>o.value="incompletedTasks"),style:{"background-color":"red",color:"white"}},"Incompleted")]),t("div",Ot,[y(ot,{onChildEmitTask:e}),(r(!0),u(H,null,P(x(d),i=>T((r(),u("div",{key:i.id},[y(xt,{item:i,onChildToggleStatus:n,onChildEditStatus:c,onChildDeleteStatus:m},null,8,["item"])])),[[j,o.value==="showAll"?!0:o.value==="completedTasks"?i.is_completed:!i.is_completed]])),128))])]),y(Mt)]))}};export{Vt as default};
