import{u as b,r as M,o as d,a as _,b as t,d as f,w as O,t as h,e as w,f as g,g as U,h as V,s as v,i as m,j as x,v as S,k as C,l as E,m as D,n as A,_ as B,F,p as H,c as I}from"./file_index.45415955.js";const P={class:"main-container"},j={id:"main-menu",class:"main-menu container-header"},q=t("h2",null,"TO-DO TASK APP",-1),z={id:"welcomemsg",class:""},J=t("u",null,"Username:",-1),K=g("\xA0"),L=g("Today is: "),R={__name:"Header",setup(a){const o=U(),s=b(),r=Date.now(),n=new Date(r),e=s.user.email,i=async()=>{try{await b().signOut(),o.push({path:"/auth/login"})}catch(l){errorMsg.value=l.message,setTimeout(()=>{errorMsg.value=null},5e3)}};return(l,p)=>{const $=M("router-link");return d(),_("div",P,[t("div",null,[t("div",j,[f($,{to:"/"},{default:O(()=>[q]),_:1}),t("p",z,[J,t("b",null,[K,t("span",null,h(w(e)),1)])]),t("p",null,[L,t("b",null,h(w(n).toDateString()),1)]),t("button",{onClick:i,type:"button",id:"btnsignout"},"Sign Out")])])])}}},c=V("task",{state:()=>({tasks:[]}),actions:{async getTasks(){const{data:a}=await v.from("task").select("*").order("id",{ascending:!1});return this.tasks=a,this.tasks},async addTask(a,o){console.log(b().user.id),await v.from("task").insert([{user_id:b().user.id,title:a,is_completed:!1,description:o}])},async editTask(a,o,s){await v.from("task").update({title:a,description:o}).eq("id",s)},async deleteTask(a){await v.from("task").delete().match({id:a})},async completedTask(a,o){await v.from("task").update({is_completed:o}).match({id:a})}}});const G={class:"container-tasks"},Q=t("h2",{class:"title-margin"},"Add a new task",-1),W={class:"task-form",id:"formInputs"},X={class:""},Y={key:0,class:"",role:"alert"},Z=["onClick"],tt={__name:"NewTask",emits:["childEmitTask"],setup(a,{emit:o}){c();const s=m(""),r=m(""),n=m(!1),u=m(null),e=()=>{if(s.value.length===0)n.value=!0,u.value="Task necesita un titulo para guardarse",setTimeout(()=>{n.value=!1},5e3);else{const i={title:s.value,description:r.value};o("childEmitTask",i),s.value="",r.value="",id.value=""}};return(i,l)=>(d(),_("div",G,[Q,t("div",W,[x(t("input",{type:"text",id:"form3Example1",class:"",placeholder:"New task title","onUpdate:modelValue":l[0]||(l[0]=p=>s.value=p)},null,512),[[S,s.value]]),t("div",null,[x(t("textarea",{type:"text",id:"form3Example2",class:"",placeholder:"Description","onUpdate:modelValue":l[1]||(l[1]=p=>r.value=p)},null,512),[[S,r.value]])]),t("div",X,[n.value?(d(),_("p",Y,h(u.value),1)):C("",!0),t("button",{onClick:E(e,["prevent"]),class:"btn-add-task"},"Add a task",8,Z)])])]))}};const et={class:"date-item"},st={class:"time"},at={class:"title"},ot={class:"description"},it={class:"buttons-container"},nt=g(" Completed task "),lt={key:0},ct={key:1,class:""},dt=g(" Show edit "),rt=t("i",{class:""},null,-1),ut=[dt,rt],_t=g(" Delete task "),mt=t("i",{class:""},null,-1),pt=[_t,mt],kt={key:0,class:"edit-container"},ht=["onSubmit"],vt=["placeholder"],gt=["placeholder"],yt={class:"edit-close-btns"},Tt=t("button",{type:"submit",id:"btnEdit",class:"edit-btn"},"Edit task",-1),ft={__name:"TaskItem",props:["item"],emits:["childEditStatus","childToggleStatus","childDeleteStatus"],setup(a,{emit:o}){const s=a,r=()=>{e.value=!e.value},n=m(s.item.title),u=m(s.item.description),e=m(!1),i=m(!1),l=D(()=>new Date(s.item.created_at).toDateString()),p=()=>{const y={title:n.value,description:u.value,id:s.item.id};o("childEditStatus",y),n.value="",u.value=""},$=y=>{i.value=!i.value,o("childToggleStatus",s.item.id)},N=()=>{o("childDeleteStatus",s.item.id)};return(y,k)=>(d(),_("div",{class:A(["item-container",{"completed-task-bg":a.item.is_completed}])},[t("div",et,[t("div",st,h(w(l)),1)]),t("h3",at,h(a.item.title),1),t("p",ot,h(a.item.description),1),t("div",it,[t("button",{type:"button",class:"completed-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Mark as complete",onClick:$},[nt,i.value?(d(),_("span",ct)):(d(),_("span",lt))]),t("button",{type:"button",class:"show-edit","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit",onClick:r},ut),t("button",{type:"button",class:"delete-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete",onClick:N},pt)]),e.value?(d(),_("div",kt,[t("form",{onSubmit:E(p,["prevent"]),class:"edit-task"},[x(t("input",{type:"text",id:"form3Example20",class:"",placeholder:s.item.title,"onUpdate:modelValue":k[0]||(k[0]=T=>n.value=T)},null,8,vt),[[S,n.value]]),t("div",null,[x(t("textarea",{type:"text",id:"form3Example21",class:"",placeholder:s.item.description,"onUpdate:modelValue":k[1]||(k[1]=T=>u.value=T)},null,8,gt),[[S,u.value]])]),t("div",yt,[Tt,t("button",{onClick:k[2]||(k[2]=T=>e.value=!1),type:"",id:"closeEdit",class:"close-edit-btn"},"Close edit task")])],40,ht)])):C("",!0)],2))}};const bt={},wt=t("div",{class:"footer"},[t("div",null,[t("p",null,[t("b",null,"Sophia de Jong")])]),t("div",null,[t("p",null,"2022")]),t("div",null,[t("p",null,[t("b",null,"Ironhack BCN")])])],-1),xt=[wt];function St(a,o){return d(),_("footer",null,xt)}const $t=B(bt,[["render",St]]);const Ct={class:"all-items"},Et={class:"container-old-items"},Nt={__name:"Home",setup(a){c().getTasks();const o=async e=>{await c().addTask(e.title,e.description),c().getTasks()},s=D(()=>c().tasks),r=async(e,i)=>{i=!i,await c().completedTask(e,i),c().getTasks()},n=async e=>{await c().editTask(e.title,e.description,e.id),console.log(e),c().getTasks()},u=async e=>{await c().deleteTask(e),c().getTasks()};return(e,i)=>(d(),_("body",null,[f(R),t("div",Ct,[t("div",Et,[f(tt,{onChildEmitTask:o}),(d(!0),_(F,null,H(w(s),l=>(d(),I(ft,{key:l.id,item:l,onChildToggleStatus:r,onChildEditStatus:n,onChildDeleteStatus:u},null,8,["item"]))),128))])]),f($t)]))}};export{Nt as default};
