import{u as b,r as M,o as c,a as _,b as t,d as f,w as O,t as h,e as w,f as g,g as U,h as V,s as v,i as m,j as x,v as S,k as E,l as C,m as D,n as A,_ as B,F,p as H,c as I}from"./file_index.67e380b2.js";const P={class:"main-container"},j={id:"main-menu",class:"main-menu container-header"},q=t("h2",null,"TO-DO TASK APP",-1),z={id:"welcomemsg",class:""},J=t("u",null,"Username:",-1),K=g("\xA0"),L=g("Today is: "),R={__name:"Header",setup(s){const o=U(),a=b(),r=Date.now(),n=new Date(r),e=a.user.email,i=async()=>{try{await b().signOut(),o.push({path:"/auth/login"})}catch(l){errorMsg.value=l.message,setTimeout(()=>{errorMsg.value=null},5e3)}};return(l,p)=>{const $=M("router-link");return c(),_("div",P,[t("div",null,[t("div",j,[f($,{to:"/"},{default:O(()=>[q]),_:1}),t("p",z,[J,t("b",null,[K,t("span",null,h(w(e)),1)])]),t("p",null,[L,t("b",null,h(w(n).toDateString()),1)]),t("button",{onClick:i,type:"button",id:"btnsignout"},"Sign Out")])])])}}},d=V("task",{state:()=>({tasks:[]}),actions:{async getTasks(){const{data:s}=await v.from("task").select("*").order("id",{ascending:!1});return this.tasks=s,this.tasks},async addTask(s,o){console.log(b().user.id),await v.from("task").insert([{user_id:b().user.id,title:s,is_completed:!1,description:o}])},async editTask(s,o,a){await v.from("task").update({title:s,description:o}).eq("id",a)},async deleteTask(s){await v.from("task").delete().match({id:s})},async completedTask(s,o){await v.from("task").update({is_completed:o}).match({id:s})}}});const G={class:"container-tasks"},Q=t("h2",{class:"title-margin"},"Add a new task",-1),W={class:"task-form",id:"formInputs"},X={class:""},Y={key:0,class:"",role:"alert"},Z=["onClick"],tt={__name:"NewTask",emits:["childEmitTask"],setup(s,{emit:o}){d();const a=m(""),r=m(""),n=m(!1),u=m(null),e=()=>{if(a.value.length===0)n.value=!0,u.value="Task necesita un titulo para guardarse",setTimeout(()=>{n.value=!1},5e3);else{const i={title:a.value,description:r.value};o("childEmitTask",i),a.value="",r.value="",id.value=""}};return(i,l)=>(c(),_("div",G,[Q,t("div",W,[x(t("input",{type:"text",id:"form3Example1",class:"",placeholder:"New task title","onUpdate:modelValue":l[0]||(l[0]=p=>a.value=p)},null,512),[[S,a.value]]),t("div",null,[x(t("textarea",{type:"text",id:"form3Example2",class:"",placeholder:"Description","onUpdate:modelValue":l[1]||(l[1]=p=>r.value=p)},null,512),[[S,r.value]])]),t("div",X,[n.value?(c(),_("p",Y,h(u.value),1)):E("",!0),t("button",{onClick:C(e,["prevent"]),class:"btn-add-task"},"Add a task",8,Z)])])]))}};const et={class:"date-item"},st={class:"time"},at={class:"title"},ot={class:"description"},it={class:"buttons-container"},nt=g(" Completed task "),lt={key:0},dt={key:1,class:""},ct=g(" Show edit "),rt=t("i",{class:""},null,-1),ut=[ct,rt],_t=g(" Delete task "),mt=t("i",{class:""},null,-1),pt=[_t,mt],kt={key:0,class:"edit-container"},ht=["onSubmit"],vt={class:"edit-close-btns"},gt=t("button",{type:"submit",id:"btnEdit",class:"edit-btn"},"Edit task",-1),yt={__name:"TaskItem",props:["item"],emits:["childEditStatus","childToggleStatus","childDeleteStatus"],setup(s,{emit:o}){const a=s,r=()=>{e.value=!e.value},n=m(a.item.title),u=m(a.item.description),e=m(!1),i=m(!1),l=D(()=>new Date(a.item.created_at).toDateString()),p=()=>{const y={title:n.value,description:u.value,id:a.item.id};o("childEditStatus",y),n.value="",u.value=""},$=y=>{i.value=!i.value,o("childToggleStatus",a.item.id)},N=()=>{o("childDeleteStatus",a.item.id)};return(y,k)=>(c(),_("div",{class:A(["item-container",{"completed-task-bg":s.item.is_completed}])},[t("div",et,[t("div",st,h(w(l)),1)]),t("h3",at,h(s.item.title),1),t("p",ot,h(s.item.description),1),t("div",it,[t("button",{type:"button",class:"completed-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Mark as complete",onClick:$},[nt,i.value?(c(),_("span",dt)):(c(),_("span",lt))]),t("button",{type:"button",class:"show-edit","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Edit",onClick:r},ut),t("button",{type:"button",class:"delete-task","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete",onClick:N},pt)]),e.value?(c(),_("div",kt,[t("form",{onSubmit:C(p,["prevent"]),class:"edit-task"},[x(t("input",{type:"text",id:"form3Example20",class:"",placeholder:"Edit title","onUpdate:modelValue":k[0]||(k[0]=T=>n.value=T)},null,512),[[S,n.value]]),t("div",null,[x(t("textarea",{type:"text",id:"form3Example21",class:"",placeholder:"Edit description","onUpdate:modelValue":k[1]||(k[1]=T=>u.value=T)},null,512),[[S,u.value]])]),t("div",vt,[gt,t("button",{onClick:k[2]||(k[2]=T=>e.value=!1),type:"",id:"closeEdit",class:"close-edit-btn"},"Close edit task")])],40,ht)])):E("",!0)],2))}};const Tt={},ft=t("div",{class:"footer"},[t("div",null,[t("p",null,[t("b",null,"Sophia de Jong")])]),t("div",null,[t("p",null,"2022")]),t("div",null,[t("p",null,[t("b",null,"Ironhack BCN")])])],-1),bt=[ft];function wt(s,o){return c(),_("footer",null,bt)}const xt=B(Tt,[["render",wt]]);const St={class:"all-items"},$t={class:"container-old-items"},Ct={__name:"Home",setup(s){d().getTasks();const o=async e=>{await d().addTask(e.title,e.description),d().getTasks()},a=D(()=>d().tasks),r=async(e,i)=>{i=!i,await d().completedTask(e,i),d().getTasks()},n=async e=>{await d().editTask(e.title,e.description,e.id),console.log(e),d().getTasks()},u=async e=>{await d().deleteTask(e),d().getTasks()};return(e,i)=>(c(),_("body",null,[f(R),t("div",St,[t("div",$t,[f(tt,{onChildEmitTask:o}),(c(!0),_(F,null,H(w(a),l=>(c(),I(yt,{key:l.id,item:l,onChildToggleStatus:r,onChildEditStatus:n,onChildDeleteStatus:u},null,8,["item"]))),128))])]),f(xt)]))}};export{Ct as default};
